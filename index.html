<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HR Smart Screener</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a0f1e;--surface:#111827;--card:#1a2235;--border:#1e3a5f;--accent:#00d4ff;--accent2:#7c3aed;--gold:#f59e0b;--green:#10b981;--red:#ef4444;--text:#e2e8f0;--muted:#64748b}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:'Cairo',sans-serif;min-height:100vh;padding:20px}
.container{max-width:900px;margin:0 auto}
h1{font-size:24px;font-weight:900;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
.subtitle{color:var(--muted);font-size:13px;margin-bottom:30px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
@media(max-width:600px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px}
.card-title{font-size:14px;font-weight:700;color:var(--accent);margin-bottom:14px}
.label{font-size:12px;color:var(--muted);margin-bottom:5px;font-weight:600}
input,textarea{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:10px 12px;color:var(--text);font-family:'Cairo',sans-serif;font-size:13px;outline:none;resize:vertical;margin-bottom:12px}
input:focus,textarea:focus{border-color:var(--accent)}
textarea{min-height:100px}
.upload{border:2px dashed var(--border);border-radius:10px;padding:24px;text-align:center;cursor:pointer;position:relative;transition:.2s}
.upload:hover{border-color:var(--accent);background:rgba(0,212,255,0.03)}
.upload input{position:absolute;inset:0;opacity:0;cursor:pointer;margin:0}
.upload-icon{font-size:28px;margin-bottom:8px}
.upload-text{font-size:13px;color:var(--muted)}
.upload-text span{color:var(--accent);font-weight:600}
.cv-list{margin-top:12px;display:flex;flex-direction:column;gap:6px}
.cv-item{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;font-size:12px}
.cv-remove{cursor:pointer;color:var(--muted)}
.cv-remove:hover{color:var(--red)}
.btn{width:100%;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;border-radius:10px;padding:14px;color:#fff;font-family:'Cairo',sans-serif;font-size:15px;font-weight:700;cursor:pointer;margin-top:10px}
.btn:disabled{opacity:.5;cursor:not-allowed}
.spinner-wrap{display:none;text-align:center;padding:30px}
.spinner-wrap.on{display:block}
.spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 12px}
@keyframes spin{to{transform:rotate(360deg)}}
.results{margin-top:24px;display:none}
.results.on{display:block}
.res-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.res-title{font-size:16px;font-weight:700}
.res-count{background:rgba(0,212,255,0.1);border:1px solid rgba(0,212,255,0.3);border-radius:20px;padding:3px 12px;font-size:12px;color:var(--accent)}
.rcard{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;margin-bottom:14px}
.rcard-top{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}
.rname{font-size:16px;font-weight:700}
.rrole{font-size:12px;color:var(--muted)}
.score{padding:6px 12px;border-radius:8px;font-size:18px;font-weight:700;min-width:60px;text-align:center}
.s-high{background:rgba(16,185,129,.15);color:var(--green);border:1px solid rgba(16,185,129,.3)}
.s-mid{background:rgba(245,158,11,.15);color:var(--gold);border:1px solid rgba(245,158,11,.3)}
.s-low{background:rgba(239,68,68,.15);color:var(--red);border:1px solid rgba(239,68,68,.3)}
.bar-wrap{margin-bottom:12px}
.bar-labels{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:4px}
.bar-track{height:5px;background:var(--surface);border-radius:3px;overflow:hidden}
.bar-fill{height:100%;border-radius:3px}
.f-high{background:linear-gradient(90deg,var(--green),#34d399)}
.f-mid{background:linear-gradient(90deg,var(--gold),#fbbf24)}
.f-low{background:linear-gradient(90deg,var(--red),#f87171)}
.tags{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px}
.tag{padding:2px 8px;border-radius:20px;font-size:11px;font-weight:600}
.t-yes{background:rgba(16,185,129,.1);color:var(--green);border:1px solid rgba(16,185,129,.2)}
.t-no{background:rgba(239,68,68,.1);color:var(--red);border:1px solid rgba(239,68,68,.2)}
.rec{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:700;margin-bottom:8px}
.r-yes{background:rgba(16,185,129,.15);color:var(--green)}
.r-maybe{background:rgba(245,158,11,.15);color:var(--gold)}
.r-no{background:rgba(239,68,68,.15);color:var(--red)}
.summary{font-size:12px;color:var(--muted);line-height:1.7;border-top:1px solid var(--border);padding-top:10px}
.rank{width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;margin-left:8px}
.rk1{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:#000}
.rk2{background:linear-gradient(135deg,#94a3b8,#cbd5e1);color:#000}
.rk3{background:linear-gradient(135deg,#92400e,#b45309);color:#fff}
.rkx{background:var(--surface);color:var(--muted);border:1px solid var(--border)}
.err{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);border-radius:8px;padding:12px;color:var(--red);font-size:13px;margin-top:12px;display:none}
</style>
</head>
<body>
<div class="container">
<h1>ğŸ¯ HR Smart Screener</h1>
<p class="subtitle">ÙØ±Ø² Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Â· Ø¹Ø±Ø¨ÙŠ ÙˆØ¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</p>
<div class="grid">
<div class="card">
<div class="card-title">ğŸ“‹ ÙˆØµÙ Ø§Ù„ÙˆØ¸ÙŠÙØ©</div>
<div class="label">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</div>
<input type="text" id="jobTitle" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ø§Ø³Ø¨ØŒ Ù…Ù‡Ù†Ø¯Ø³ Ø¨Ø±Ù…Ø¬ÙŠØ§Øª...">
<div class="label">Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</div>
<textarea id="jobDesc" placeholder="Ø§ÙƒØªØ¨ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ©..."></textarea>
<div class="label">Ù…Ø¹Ø§ÙŠÙŠØ± Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</div>
<input type="text" id="extra" placeholder="Ù…Ø«Ø§Ù„: Ø®Ø¨Ø±Ø© ÙÙŠ Ø§Ù„Ø¨Ù†ÙˆÙƒ...">
</div>
<div class="card">
<div class="card-title">ğŸ“„ Ø±ÙØ¹ Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠØ©</div>
<div class="upload" id="uploadArea">
<input type="file" id="cvFiles" multiple accept=".pdf,.txt">
<div class="upload-icon">ğŸ“‚</div>
<div class="upload-text"><span>Ø§Ø¶ØºØ· Ù„Ù„Ø±ÙØ¹</span> Ø£Ùˆ Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª<br><small>PDF, TXT</small></div>
</div>
<div class="cv-list" id="cvList"></div>
<div id="cvCount" style="font-size:12px;color:var(--muted);margin-top:8px;text-align:center;display:none">âœ… <span id="cvNum">0</span> Ø³ÙŠØ±Ø© Ø¬Ø§Ù‡Ø²Ø©</div>
</div>
</div>
<div class="err" id="errBox"></div>
<button class="btn" id="analyzeBtn" onclick="analyze()">ğŸš€ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
<div class="spinner-wrap" id="loading"><div class="spinner"></div><p style="color:var(--muted);font-size:13px" id="loadTxt">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù„ÙŠÙ„...</p></div>
<div class="results" id="results"><div class="res-header"><div class="res-title">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„</div><div class="res-count" id="resCount">0 Ù…Ø±Ø´Ø­</div></div><div id="cards"></div></div>
</div>
<script>
let files=[];
document.getElementById('cvFiles').onchange=e=>add(Array.from(e.target.files));
const ua=document.getElementById('uploadArea');
ua.ondragover=e=>{e.preventDefault();ua.style.borderColor='var(--accent)'};
ua.ondragleave=()=>ua.style.borderColor='';
ua.ondrop=e=>{e.preventDefault();ua.style.borderColor='';add(Array.from(e.dataTransfer.files))};
function add(f){f.filter(x=>x.name.match(/\.(pdf|txt)$/i)).forEach(x=>{if(!files.find(y=>y.name===x.name))files.push(x)});render()}
function render(){document.getElementById('cvList').innerHTML=files.map((f,i)=>`<div class="cv-item"><span>ğŸ“„ ${f.name}</span><span class="cv-remove" onclick="del(${i})">âœ•</span></div>`).join('');document.getElementById('cvNum').textContent=files.length;document.getElementById('cvCount').style.display=files.length?'block':'none'}
function del(i){files.splice(i,1);render()}
async function b64(file){return new Promise((res,rej)=>{const r=new FileReader();r.onload=e=>res(e.target.result.split(',')[1]);r.onerror=rej;r.readAsDataURL(file)})}
async function txt(file){return new Promise(res=>{const r=new FileReader();r.onload=e=>res(e.target.result||'');r.onerror=()=>res('');r.readAsText(file,'UTF-8')})}
function err(m){const b=document.getElementById('errBox');b.textContent='âŒ '+m;b.style.display='block'}
function clearErr(){document.getElementById('errBox').style.display='none'}
async function analyze(){
const title=document.getElementById('jobTitle').value.trim();
const desc=document.getElementById('jobDesc').value.trim();
const extra=document.getElementById('extra').value.trim();
clearErr();
if(!title||!desc)return err('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª');
if(!files.length)return err('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
const btn=document.getElementById('analyzeBtn');
btn.disabled=true;
document.getElementById('loading').className='spinner-wrap on';
document.getElementById('results').className='results';
const msgs=['Ø¬Ø§Ø±Ù Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙŠØ±...','ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª...','Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª...','ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†...'];
let mi=0;
const iv=setInterval(()=>document.getElementById('loadTxt').textContent=msgs[mi++%msgs.length],1800);
try{
const content=[{type:'text',text:`Ø£Ù†Øª Ø®Ø¨ÙŠØ± HR. Ø­Ù„Ù‘Ù„ Ø§Ù„Ø³ÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠØ© ÙˆØ£Ø¬Ø¨ Ø¨Ù€ JSON ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù†Øµ Ø¢Ø®Ø±.\n\nØ§Ù„ÙˆØ¸ÙŠÙØ©: ${title}\nØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª: ${desc}${extra?'\nÙ…Ø¹Ø§ÙŠÙŠØ± Ø¥Ø¶Ø§ÙÙŠØ©: '+extra:''}\n\nØ§Ù„Ù…Ù„ÙØ§Øª: ${files.map(f=>f.name).join(', ')}\n\nØ£Ø¬Ø¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„ ÙÙ‚Ø·:\n{"candidates":[{"filename":"Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù","name":"Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø´Ø­","currentRole":"Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„Ø­Ø§Ù„ÙŠ","score":85,"recommendation":"Ù…Ù‚Ø¨ÙˆÙ„","matchedSkills":["Ù…Ù‡Ø§Ø±Ø©"],"missingSkills":["Ù†Ø§Ù‚Øµ"],"summary":"Ù…Ù„Ø®Øµ"}]}\n\nØ§Ù„ØªÙˆØµÙŠØ©: Ù…Ù‚Ø¨ÙˆÙ„ Ø£Ùˆ ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø£Ùˆ Ù…Ø±ÙÙˆØ¶`}];
for(const f of files){
if(f.name.toLowerCase().endsWith('.pdf')){const d=await b64(f);content.push({type:'document',source:{type:'base64',media_type:'application/pdf',data:d}})}
else{const t=await txt(f);content.push({type:'text',text:`\n--- ${f.name} ---\n${t.substring(0,4000)}`})}
}
const res=await fetch('/api/analyze',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({content})});
if(!res.ok){const e=await res.json();throw new Error(e.error||'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…')}
const data=await res.json();
const m=data.result.match(/\{[\s\S]*\}/);
if(!m)throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©');
const result=JSON.parse(m[0]);
if(!result.candidates?.length)throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬');
result.candidates.sort((a,b)=>b.score-a.score);
clearInterval(iv);
document.getElementById('loading').className='spinner-wrap';
show(result.candidates);
}catch(e){clearInterval(iv);document.getElementById('loading').className='spinner-wrap';err(e.message);console.error(e)}
btn.disabled=false;
}
function show(cs){
document.getElementById('resCount').textContent=cs.length+' Ù…Ø±Ø´Ø­';
document.getElementById('results').className='results on';
document.getElementById('cards').innerHTML=cs.map((c,i)=>{
const sc=c.score>=70?'high':c.score>=50?'mid':'low';
const rk=['rk1','rk2','rk3'][i]||'rkx';
const rc=c.recommendation==='Ù…Ù‚Ø¨ÙˆÙ„'?'r-yes':c.recommendation==='ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©'?'r-maybe':'r-no';
const ri=c.recommendation==='Ù…Ù‚Ø¨ÙˆÙ„'?'âœ…':c.recommendation==='ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©'?'âš ï¸':'âŒ';
return`<div class="rcard">
<div class="rcard-top">
<div style="display:flex;align-items:center">
<div class="rank ${rk}">${i+1}</div>
<div><div class="rname">${c.name}</div><div class="rrole">${c.currentRole||c.filename}</div></div>
</div>
<div class="score s-${sc}">${c.score}%</div>
</div>
<div class="bar-wrap"><div class="bar-labels"><span>Ø§Ù„ØªØ·Ø§Ø¨Ù‚</span><span>${c.score}/100</span></div><div class="bar-track"><div class="bar-fill f-${sc}" style="width:${c.score}%"></div></div></div>
<div class="rec ${rc}">${ri} ${c.recommendation}</div>
${c.matchedSkills?.length?`<div class="tags">${c.matchedSkills.slice(0,4).map(s=>`<span class="tag t-yes">âœ“ ${s}</span>`).join('')}${c.missingSkills?.slice(0,2).map(s=>`<span class="tag t-no">âœ— ${s}</span>`).join('')||''}</div>`:''}
<div class="summary">${c.summary}</div>
</div>`}).join('');
}
</script>
</body>
</html>
